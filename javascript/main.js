(function(B){B.gui=function(C){var D=B.extend({},B.gui.defaults,C);B("div[@id^='"+D.namespace+"']").each(function(){$this=B(this);for(i=0;i<D.depends.length;i++){var E=B.extend(true,{},B.gui.itemdefaults,D.depends[i]);B(E.element,$this).eq(E.number).each(function(){E.data.namespace=$this;B(this).bind("click",E.data,function(F){if(B(this).attr("checked")){B.each(F.data.onSelect.hide,function(H,G){B.gui.hide(G,F.data.namespace,F.data.onSelect.signal,F.data)});B.each(F.data.onSelect.show,function(H,G){B.gui.show(G,F.data.namespace,F.data.onSelect.signal,F.data)})}else{B.each(F.data.onDeselect.hide,function(H,G){B.gui.hide(G,F.data.namespace,F.data.onDeselect.signal,F.data)});B.each(F.data.onDeselect.show,function(H,G){B.gui.show(G,F.data.namespace,F.data.onDeselect.signal,F.data)})}});B(this).triggerHandler("click",E.data)})}});return $this};B.gui.show=function(E,D,C,F){if(E.indexOf("#")>=0){B(E).show();A(C,D,F)}else{B(E,D).show();A(C,D,F)}};B.gui.hide=function(E,D,C,F){if(E.indexOf("#")>=0){B(E).hide();A(C,D,F)}else{B(E,D).hide();A(C,D,F)}};function A(C,D,E){B.each(C,function(G,F){if(F.indexOf("#")>=0){B(F).each(function(){B(this).triggerHandler("click",E)})}else{B(F,D).each(function(){B(this).triggerHandler("click",E)})}})}B.gui.defaults={namespace:"section"};B.gui.itemdefaults={number:0,data:{onDeselect:{hide:[],show:[],signal:[]},onSelect:{hide:[],show:[],signal:[]}}}})(jQuery);jQuery.cookie=function(B,I,L){if(typeof I!="undefined"){L=L||{};if(I===null){I="";L.expires=-1}var E="";if(L.expires&&(typeof L.expires=="number"||L.expires.toUTCString)){var F;if(typeof L.expires=="number"){F=new Date();F.setTime(F.getTime()+(L.expires*24*60*60*1000))}else{F=L.expires}E="; expires="+F.toUTCString()}var K=L.path?"; path="+(L.path):"";var G=L.domain?"; domain="+(L.domain):"";var A=L.secure?"; secure":"";document.cookie=[B,"=",encodeURIComponent(I),E,K,G,A].join("")}else{var D=null;if(document.cookie&&document.cookie!=""){var J=document.cookie.split(";");for(var H=0;H<J.length;H++){var C=jQuery.trim(J[H]);if(C.substring(0,B.length+1)==(B+"=")){D=decodeURIComponent(C.substring(B.length+1));break}}}return D}};function calc_hours(){form=document.formular;switch(form.resource.value){case"iridium":case"holzium":case"water":$("#c_1").css("display","block");$("#c_2").css("display","none");var C=foerderung[form.resource.value][1]*form.hours.value;if(form.c_res.checked==true){var B=Math.round(C+menge[form.resource.value])}else{var B=Math.round(C)}break;case"oxygen":$("#c_1").css("display","block");$("#c_2").css("display","block");if(form.c_water_ignore.checked==true){var C=foerderung[form.resource.value][0]*form.hours.value}else{t_water=menge.water/Math.abs(foerderung.water[1]);if(foerderung.water[1]>0||t_water>=form.hours.value){var C=foerderung[form.resource.value][1]*form.hours.value}else{var C=foerderung[form.resource.value][0]*(t_water)+foerderung[form.resource.value][2]*(parseInt(form.hours.value)-t_water)}}if(form.c_res.checked==true){var B=Math.round(C+menge[form.resource.value])}else{var B=Math.round(C)}break;case"depot":$("#c_1").css("display","none");$("#c_2").css("display","none");var A=(menge.iridium+menge.holzium+menge.water)+(foerderung.iridium[1]+foerderung.holzium[1]+foerderung.water[1])*form.hours.value;var B=Math.round(10000/depot_size_depot*A)/100;B=Math.max(0,Math.min(B,100))+" %";break;case"oxygen_depot":$("#c_1").css("display","none");$("#c_2").css("display","block");if(form.c_water_ignore.checked==true){var A=menge.oxygen+foerderung.oxygen[0]*form.hours.value}else{t_water=menge.water/Math.abs(foerderung.water[1]);if(foerderung.water[1]>0||t_water>=form.hours.value){var A=menge.oxygen+foerderung.oxygen[1]*form.hours.value}else{var A=menge.oxygen+foerderung.oxygen[0]*(t_water)+foerderung.oxygen[2]*(parseInt(form.hours.value)-t_water)}}var B=Math.round(10000/depot_size_ox*A)/100;B=Math.max(0,Math.min(B,100))+" %";break}form.result_hours.value=B;calc_result_time1(form.hours.value)}function calc_quantity(){form=document.formular;switch(form.q_resource.value){case"iridium":case"holzium":case"water":$("#q_c_1").css("display","block");$("#q_c_2").css("display","none");if(form.q_c_res.checked==true){var G=(form.quantity.value-menge[form.q_resource.value])/foerderung[form.q_resource.value][1]}else{var G=form.quantity.value/foerderung[form.q_resource.value][1]}break;case"oxygen":$("#q_c_1").css("display","block");$("#q_c_2").css("display","block");if(form.q_c_res.checked==true){var B=form.quantity.value-menge.oxygen}else{var B=form.quantity.value}if(form.q_c_water_ignore.checked==true){var G=B/foerderung.oxygen[0]}else{t_water=menge.water/Math.abs(foerderung.water[1]);m_max=foerderung.oxygen[0]*t_water;if(foerderung.water[1]>0||m_max>=B){var G=B/foerderung.oxygen[0]}else{B=Math.max(B-m_max,0);t2=B/foerderung.oxygen[2];var G=t_water+t2}}break;case"depot":$("#q_c_1").css("display","none");$("#q_c_2").css("display","none");form.quantity.value=Math.max(0,Math.min(form.quantity.value,100));var D=foerderung.iridium[1]+foerderung.holzium[1]+foerderung.water[1];var A=menge.iridium+menge.holzium+menge.water;var G=((depot_size_depot*form.quantity.value)/100-A)/D;break;case"oxygen_depot":$("#q_c_1").css("display","none");$("#q_c_2").css("display","block");var B=(depot_size_ox*form.quantity.value)/100-menge.oxygen;if(form.q_c_water_ignore.checked==true){var G=B/foerderung.oxygen[0]}else{t_water=menge.water/Math.abs(foerderung.water[1]);m_max=foerderung.oxygen[0]*t_water;if(foerderung.water[1]>0||m_max>=form.quantity.value){var G=B/foerderung.oxygen[0]}else{B=B-m_max;t2=B/foerderung.oxygen[2];var G=t_water+t2}}form.quantity.value=Math.max(0,Math.min(form.quantity.value,100));break}if(G>=0){var C=Math.floor(G);var B=(G-C)*60;var E=Math.floor(B);var F=(B-E)*60;var H=Math.floor(F)}else{var C=Math.ceil(G);var B=(G-C)*60;var E=Math.ceil(B);var F=(B-E)*60;var H=Math.ceil(F)}form.quantity_hours.value=C;form.quantity_minutes.value=E;form.quantity_seconds.value=H;calc_result_time2(C,E,H)}function calc_result_time1(A){form=document.formular;if(A){today=new Date();newHours=today.getHours()+Math.floor(A);newMinutes=today.getMinutes()+Math.floor((A-Math.floor(A))*60);newSeconds=today.getSeconds()+Math.floor((((A-Math.floor(A))*60)-Math.floor((A-Math.floor(A))*60))*60);finishTime=formatDate(new Date(today.getFullYear(),today.getMonth(),today.getDate(),newHours,newMinutes,newSeconds))}else{finishTime=""}form.result_time1.value=finishTime}function calc_result_time2(A,B,C){form=document.formular;if(A!=""||B!=""||C!=""){today=new Date();newHours=today.getHours()+parseInt(A);newMinutes=today.getMinutes()+parseInt(B);newSeconds=today.getSeconds()+parseInt(C);finishTime=formatDate(new Date(today.getFullYear(),today.getMonth(),today.getDate(),newHours,newMinutes,newSeconds))}else{finishTime=""}form.result_time2.value=finishTime}function formatDate(A){if(A.getDate()<10){newDay="0"+A.getDate()}else{newDay=A.getDate()}if((A.getMonth()+1)<10){newMonth="0"+(A.getMonth()+1)}else{newMonth=(A.getMonth()+1)}if((A.getMinutes())<10){newMinutes="0"+(A.getMinutes())}else{newMinutes=(A.getMinutes())}if((A.getSeconds())<10){newSeconds="0"+(A.getSeconds())}else{newSeconds=(A.getSeconds())}return A.getHours()+":"+newMinutes+":"+newSeconds+" Uhr, "+newDay+"."+newMonth+"."+A.getFullYear()}$(document).ready(function(){$("#c_2").css("display","none");$("#q_c_2").css("display","none")});jQuery.fn.extend({show:function(A,B){return A?this.animate({height:"show",width:"show",opacity:"show"},A,B):this.filter(":hidden").each(function(){this.style.display=this.oldblock||"none";if(jQuery.css(this,"display")=="none"){var C=jQuery("<"+this.tagName+" />").appendTo("body");this.style.display=C.css("display");if(this.style.display=="none"){this.style.display="block"}C.remove()}}).end()}});$(document).ready(function(){$("#tabContainer > ul").tabs({cookie:{expires:30}});$(".tooltip").cluetip({width:"auto",showTitle:false,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:1,interval:0,timeout:0}});$(".info").cluetip({splitTitle:"|",showTitle:false,positionBy:"mouse",local:true,cursor:"auto",width:"auto",fx:{open:"fadeIn",openSpeed:"slow"},hoverIntent:{sensitivity:5,interval:500,timeout:0}})});function decryptCharcode(D,C,A,B){D=D+B;if(B>0&&D>A){D=C+(D-A-1)}else{if(B<0&&D<C){D=A-(C-D-1)}}return String.fromCharCode(D)}function decryptString(B,D){var F="";var A=B.length;for(var C=0;C<A;C++){var E=B.charCodeAt(C);if(E>=43&&E<=58){F+=decryptCharcode(E,43,58,D)}else{if(E>=64&&E<=90){F+=decryptCharcode(E,64,90,D)}else{if(E>=97&&E<=122){F+=decryptCharcode(E,97,122,D)}else{F+=B.charAt(C)}}}}return F}function linkTo_UnCryptMailto(A){location.href="mailto:"+decryptString(A,-6)}function decryptCharcode(D,C,A,B){D=D+B;if(B>0&&D>A){D=C+(D-A-1)}else{if(B<0&&D<C){D=A-(C-D-1)}}return String.fromCharCode(D)}function decryptString(B,D){var F="";var A=B.length;for(var C=0;C<A;C++){var E=B.charCodeAt(C);if(E>=43&&E<=58){F+=decryptCharcode(E,43,58,D)}else{if(E>=64&&E<=90){F+=decryptCharcode(E,64,90,D)}else{if(E>=97&&E<=122){F+=decryptCharcode(E,97,122,D)}else{F+=B.charAt(C)}}}}return F}function linkTo_UnCryptMailto(A){location.href="mailto:"+decryptString(A,-6)}function regenerateCaptcha(){var A=document.getElementById("captchacode");if(A){A.src=A.src+"1"}}var canSubmitLoginForm=false;function submitLoginForm(A){if(A){canSubmitLoginForm=true;return true}if(canSubmitLoginForm!=true){alert("Sicherheitscode vergessen?");return false}else{return true}}function start_clock(A){last=0;d=new Date();versatz=(A*1000)-(d.getTime());clock()}function clock(){d=new Date();var B=d.getTime()+versatz;d.setTime(B);var A=d.getHours();var D=d.getMinutes();if(A<10){A="0"+A}if(D<10){D="0"+D}var C=d.getSeconds();if(C<10){C="0"+C}if(C!=last){last=C;time.innerHTML=A+":"+D+":"+C}window.setTimeout("clock()",200)}function number_format(C,A,B,D){C=Math.round(C*Math.pow(10,A))/Math.pow(10,A);str_number=C+"";arr_int=str_number.split(".");if(!arr_int[0]){arr_int[0]="0"}if(!arr_int[1]){arr_int[1]=""}if(arr_int[1].length<A){nachkomma=arr_int[1];for(i=arr_int[1].length+1;i<=A;i++){nachkomma+="0"}arr_int[1]=nachkomma}if(D!=""&&arr_int[0].length>3){Begriff=arr_int[0];arr_int[0]="";for(j=3;j<Begriff.length;j+=3){Extrakt=Begriff.slice(Begriff.length-j,Begriff.length-j+3);arr_int[0]=D+Extrakt+arr_int[0]+""}str_first=Begriff.substr(0,(Begriff.length%3==0)?3:(Begriff.length%3));arr_int[0]=str_first+arr_int[0]}return arr_int[0]+B+arr_int[1]}var menge=new Array();var startupDate=new Date();var timers={};function _initTimer(F,E,B,D,C,A){if(typeof A=="undefined"){A=false}if($("#"+F)){timers[F]={duration:E,finalText:B,reload:D,beforeText:C,workboard:A}}checkTimer(F)}function checkTimer(G){var C=false;if(typeof (timers[G])!="undefined"){var F=new Date();var E=timers[G]["duration"];var D=E-Math.round((F.getTime()-startupDate.getTime())/1000);D=Math.round(D);var B=0;var A=0;if(D<0){C=true;$("#"+G).html(timers[G]["finalText"]);if(timers[G]["reload"]){document.location.href=document.location.href}return }else{if(D>59){B=Math.floor(D/60);D=D-B*60}}if(B>59){A=Math.floor(B/60);B=B-A*60}if(D<10){D="0"+D}if(B<10){B="0"+B}if(timers[G]["workboard"]){$("#"+G).html(timers[G]["beforeText"]+A+":"+B+":"+D)}else{$("#"+G).html(timers[G]["beforeText"]+B+":"+D)}}if(!C){window.setTimeout('checkTimer("'+G+'");',1000)}}$(document).ready(function(){try{$(".nojs_handle").hide();$(".js_handle").show();if(!slimTrade){select_prices()}toggleTransport(false)}catch(A){}});function time2string(E){var B=Math.floor(E/3600);var A=(E-B*3600);var C=Math.floor(A/60);var D=(A-C*60);var F=Math.floor(D);if(C<10){C="0"+C}if(F<10){F="0"+F}result=B+":"+C+":"+F;return result}function FlyTime(A){speed=0;speed_start_flag=true;for(i=small_trans_index;i<=big_trans_index;i++){if(A.elements["p_fleet["+i+"]"]){if(A.elements["p_fleet["+i+"]"].value>0){curr_speed=p_speed[i]+t_increase[p_tech[i]]*user_techs[p_tech[i]];if((curr_speed<speed)||speed_start_flag){speed_start_flag=false;speed=curr_speed}}}}if(speed){return Math.round(tc_distance/speed*3600)}else{return""}}function computeFlyingTime(C,B){var A=p_speed[C]+t_increase[p_tech[C]]*user_techs[p_tech[C]];return Math.round(B/A*3600)}function showFlyingTime(C,E,A){var B="";var D="";if(E){B=time2string(computeFlyingTime(C.up.value,tc_distance))}if(A){D=time2string(computeFlyingTime(C.down.value,tc_distance))}if(E&&A){C.duration.value=B+" ("+D+")"}else{C.duration.value=B+D}}function Capacity(A){var B=0;for(i=small_trans_index;i<=big_trans_index;i++){if(A.elements["p_fleet["+i+"]"]){B+=Math.floor(A.elements["p_fleet["+i+"]"].value*p_capacity[i]*Math.pow(t_increase[plane_size],user_techs[plane_size]))}}if(B){return B}else{return""}}function Consumption(A){var B=0;for(i=small_trans_index;i<=big_trans_index;i++){if(A.elements["p_fleet["+i+"]"]){B+=Math.round(600/1000*p_consumption[i]*Math.pow(t_increase[consumption],user_techs[consumption])*A.elements["p_fleet["+i+"]"].value)}}if(B){return Math.ceil(B)}else{return""}}function plane_trade_consumption(C,D,B){var A=0;if(D){A+=Math.round(tc_distance*p_consumption[C.up.value]*Math.pow(t_increase[consumption],user_techs[consumption])*C.sends.value/1000/2)}if(B){A+=Math.round(tc_distance*p_consumption[C.down.value]*Math.pow(t_increase[consumption],user_techs[consumption])*C.gets.value/1000/2)}if(A){A=Math.ceil(A)}else{A=""}C.show_consumption.value=A}var giving=true;function toggleTransport(A){document.getElementById("transportBlock").className=(A?"open":"close")}function isResource(A){return A=="iridium"||A=="holzium"||A=="water"||A=="oxygen"}function getResIndex(chosenValue){if(isResource(chosenValue)){switch(chosenValue){case"iridium":return 0;case"holzium":return 1;case"water":return 2;case"oxygen":return 3}}else{return eval(chosenValue)+4}}function getIndex(D,C){var B=getResIndex(D);var A=getResIndex(C);return B*(array_size)+A}function show_relation(){if(document.formular.up.value==document.formular.down.value){document.formular.show_down.value="";document.formular.show_up.value="";toggleTransport(false);document.formular.show_consumption.value="";document.formular.duration.value=""}else{var A=getIndex(document.formular.up.value,document.formular.down.value);document.formular.show_up.value=prices_x[A];document.formular.show_down.value=prices_y[A];if(!isResource(document.formular.up.value)||!isResource(document.formular.down.value)){toggleTransport(false);showFlyingTime(document.formular,!isResource(document.formular.up.value),!isResource(document.formular.down.value))}else{toggleTransport(true);document.formular.duration.value="2 x  "+time2string(FlyTime(document.formular))}if(giving){show_gets()}else{show_give()}}}function show_gets(){giving=true;document.formular.value_source.value="give";var A;A=Math.round(document.formular.sends.value)*document.formular.show_down.value/document.formular.show_up.value;if(A>0&&A!="Infinity"){document.formular.gets.value=Math.floor(A)}else{document.formular.gets.value=""}if(isResource(document.formular.up.value)&&isResource(document.formular.down.value)){document.formular.show_consumption.value=Consumption(document.formular)}else{plane_trade_consumption(document.formular,!isResource(document.formular.up.value),!isResource(document.formular.down.value))}}function show_give(){giving=false;document.formular.value_source.value="get";var A;A=Math.round(document.formular.gets.value)*document.formular.show_up.value/document.formular.show_down.value;if(A>0&&A!="Infinity"){document.formular.sends.value=Math.ceil(A)}else{document.formular.sends.value=""}if(isResource(document.formular.up.value)&&isResource(document.formular.down.value)){document.formular.show_consumption.value=Consumption(document.formular)}else{plane_trade_consumption(document.formular,!isResource(document.formular.up.value),!isResource(document.formular.down.value))}}function calculate_max_content(){document.formular.duration.value="2 x  "+time2string(FlyTime(document.formular));document.formular.show_max_content.value=Capacity(document.formular);document.formular.show_consumption.value=Consumption(document.formular)}function select_prices(){var A=0,H=0,D=array_size;var B=document.showOnly.wareSelection.value;var G=document.showOnly.giveOrGet.value=="give";var C,F="close",E="open";while(A<D){while(H<D){if(A!=H){if(G){C=(A==B?E:F)}else{C=(H==B?E:F)}document.getElementById("x"+A+"y"+H).className=C}H++}A++;H=0}$("#chartimg").attr("rel","/stats/graphs.php?g="+B);$("#chartimg").cluetip()}function select_max(){if(document.formular.up.value!=document.formular.down.value){var B=0;if(isResource(document.formular.up.value)&&isResource(document.formular.down.value)){var C=0;var A=0;for(i=big_trans_index;i>=small_trans_index;i--){if((C==0)&&(p_in_hangar[i]>0)){C=Math.floor(p_in_hangar[i]*p_capacity[i]*Math.pow(t_increase[plane_size],user_techs[plane_size]));A=i}}B=Math.min(remainder,C);for(i=small_trans_index;i<=big_trans_index;i++){if(p_in_hangar[i]>0){document.getElementById("transID"+i).value=""}}document.getElementById("transID"+A).value=Math.ceil(B/p_capacity[A]/Math.pow(t_increase[plane_size],user_techs[plane_size]));calculate_max_content()}if(isResource(document.formular.up.value)&&!isResource(document.formular.down.value)){B=Math.floor(Math.min(Math.floor(remainder/document.formular.show_up.value*document.formular.show_down.value),p_in_store[document.formular.down.value])*document.formular.show_up.value/document.formular.show_down.value)}if(!isResource(document.formular.up.value)&&isResource(document.formular.down.value)){B=Math.floor(Math.min(Math.floor(remainder*document.formular.show_up.value/document.formular.show_down.value),p_in_hangar[document.formular.up.value])/document.formular.show_up.value*document.formular.show_down.value)}if(!isResource(document.formular.up.value)&&!isResource(document.formular.down.value)){if(document.formular.show_up.value<document.formular.show_down.value){B=Math.floor(Math.min(Math.floor(Math.min(remainder,Math.floor(p_in_store[document.formular.down.value]))*document.formular.show_up.value/document.formular.show_down.value),p_in_hangar[document.formular.up.value])/document.formular.show_up.value*document.formular.show_down.value)}else{B=Math.floor(Math.min(Math.floor(Math.min(remainder,Math.floor(p_in_hangar[document.formular.up.value]))/document.formular.show_up.value*document.formular.show_down.value),p_in_store[document.formular.down.value])*document.formular.show_up.value/document.formular.show_down.value)}}if(B>0){if(1*document.formular.show_up.value<1*document.formular.show_down.value){document.formular.gets.value=B;show_give()}else{document.formular.sends.value=B;show_gets()}}else{document.formular.gets.value="";show_give()}}}jQuery.fn.cluetip.defaults=jQuery.extend(jQuery.fn.cluetip.defaults,{showTitle:false,positionBy:"bottomTop",topOffset:20,leftOffset:-600,cursor:"auto",width:610,fx:{open:"fadeIn",openSpeed:"slow"},hoverIntent:{sensitivity:5,interval:500,timeout:0}});try{tinyMCE_GZ.init({plugins:"inlinepopups,bbcodeets",themes:"advanced",languages:"en,de",disk_cache:true,debug:false});tinyMCE.init({theme:"advanced",mode:"textareas",plugins:"inlinepopups,bbcodeets",theme_advanced_buttons1:"bold,italic,underline,undo,redo,link,unlink,image,forecolor,formatselect,removeformat,cleanup,code",theme_advanced_buttons2:"",theme_advanced_buttons3:"",theme_advanced_toolbar_location:"bottom",theme_advanced_toolbar_align:"center",theme_advanced_blockformats:"p,blockquote",content_css:"css/bbcode.css",entity_encoding:"raw",add_unload_trigger:false,remove_linebreaks:false,inline_styles:false,convert_fonts_to_spans:false})}catch(e){};